(function(m,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(m=typeof globalThis<"u"?globalThis:m||self,o(m.Vue3ElectronicSignature={},m.Vue))})(this,function(m,o){"use strict";var ct=Object.defineProperty;var ut=(m,o,b)=>o in m?ct(m,o,{enumerable:!0,configurable:!0,writable:!0,value:b}):m[o]=b;var k=(m,o,b)=>(ut(m,typeof o!="symbol"?o+"":o,b),b);function b(a,e){return Math.sqrt(Math.pow(e.x-a.x,2)+Math.pow(e.y-a.y,2))}function X(a,e){return Math.atan2(e.y-a.y,e.x-a.x)}function Y(a,e,s,t){const n=e||a,r=s||a,h=.2,c=X(n,r)*(t?1:-1),l=b(n,r)*h;return{x:a.x+Math.cos(c)*l,y:a.y+Math.sin(c)*l,time:a.time}}function A(a,e,s){if(!s.pressure.enabled)return s.strokeWidth;const t=b(a,e),n=e.time-a.time,r=n>0?t/n:0,h=Math.max(.1,Math.min(1,1-r*.01)),{min:c,max:l}=s.pressure;return c+(l-c)*h}function N(a,e,s){if(e.length<2)return;if(a.strokeStyle=s.strokeColor,a.lineCap="round",a.lineJoin="round",!s.smoothing||e.length<3){a.beginPath(),a.lineWidth=s.strokeWidth,a.moveTo(e[0].x,e[0].y);for(let n=1;n<e.length;n++)a.lineTo(e[n].x,e[n].y);a.stroke();return}a.beginPath(),a.moveTo(e[0].x,e[0].y);for(let n=1;n<e.length-1;n++){const r=e[n],h=e[n+1];s.pressure.enabled?a.lineWidth=A(e[n-1],r,s):a.lineWidth=s.strokeWidth;const c=Y(r,e[n-1],h);a.quadraticCurveTo(c.x,c.y,r.x,r.y)}const t=e[e.length-1];a.lineTo(t.x,t.y),a.stroke()}function O(a){const{canvasSize:e,paths:s}=a;let t=`<svg width="${e.width}" height="${e.height}" xmlns="http://www.w3.org/2000/svg">`;return s.forEach(n=>{if(n.points.length<2)return;let r=`M ${n.points[0].x} ${n.points[0].y}`;for(let h=1;h<n.points.length;h++)r+=` L ${n.points[h].x} ${n.points[h].y}`;t+=`<path d="${r}" stroke="${n.strokeColor}" stroke-width="${n.strokeWidth}" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`}),t+="</svg>",t}function q(a,e,s={format:"png"}){const{format:t,quality:n=.9,size:r,backgroundColor:h}=s;if(t==="svg")return O(e);const c=document.createElement("canvas"),l=c.getContext("2d");if(r){c.width=r.width,c.height=r.height;const p=r.width/a.width,y=r.height/a.height;l.scale(p,y)}else c.width=a.width,c.height=a.height;switch(h&&h!=="transparent"&&(l.fillStyle=h,l.fillRect(0,0,c.width,c.height)),l.drawImage(a,0,0),t){case"jpeg":return c.toDataURL("image/jpeg",n);case"base64":return c.toDataURL("image/png").split(",")[1];case"png":default:return c.toDataURL("image/png")}}function F(a,e){return new Promise((s,t)=>{const n=new Image;n.onload=()=>{const r=a.getContext("2d");r.clearRect(0,0,a.width,a.height),r.drawImage(n,0,0,a.width,a.height),s()},n.onerror=t,n.src=e})}function M(a){return a.paths.length===0||a.paths.every(e=>e.points.length===0)}function _(a,e){return{paths:[],canvasSize:{width:a,height:e},timestamp:Date.now(),isEmpty:!0}}function P(a){return JSON.parse(JSON.stringify(a))}class H{constructor(e){k(this,"canvas");k(this,"ctx");k(this,"replayData",null);k(this,"state","idle");k(this,"currentTime",0);k(this,"speed",1);k(this,"animationId",null);k(this,"startTimestamp",0);k(this,"pausedTime",0);k(this,"options",{});k(this,"eventCallbacks",new Map);this.canvas=e,this.ctx=e.getContext("2d")}setReplayData(e,s={}){console.log("设置回放数据:",e),console.log("回放选项:",s),this.replayData=e,this.options={...s},this.speed=s.speed||e.speed||1,this.currentTime=s.startTime||0,this.state="idle",console.log("回放数据设置完成，路径数量:",e.paths.length),console.log("总时长:",e.totalDuration)}play(){if(console.log("播放方法调用，回放数据:",this.replayData),console.log("当前状态:",this.state),!this.replayData){console.error("没有回放数据，无法播放");return}if(this.state==="playing"){console.log("已在播放中，忽略");return}this.state==="paused"?(console.log("从暂停状态恢复播放"),this.state="playing",this.startTimestamp=performance.now()-this.pausedTime,this.emit("replay-resume")):(console.log("开始新的播放"),this.state="playing",this.startTimestamp=performance.now(),this.pausedTime=0,this.currentTime=this.options.startTime||0,this.clearCanvas(),this.emit("replay-start")),this.animate()}pause(){this.state==="playing"&&(this.state="paused",this.pausedTime=performance.now()-this.startTimestamp,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.emit("replay-pause"))}stop(){this.state="stopped",this.currentTime=0,this.pausedTime=0,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.clearCanvas(),this.emit("replay-stop")}seek(e){if(!this.replayData)return;const s=this.options.endTime||this.replayData.totalDuration;this.currentTime=Math.max(0,Math.min(e,s)),this.state==="playing"?this.startTimestamp=performance.now()-this.currentTime/this.speed:this.pausedTime=this.currentTime/this.speed,this.renderFrame(this.currentTime)}setSpeed(e){const s=this.state==="playing";s&&this.pause(),this.speed=Math.max(.1,Math.min(5,e)),this.emit("replay-speed-change",this.speed),s&&this.play()}getState(){return this.state}getCurrentTime(){return this.currentTime}getTotalDuration(){var e;return((e=this.replayData)==null?void 0:e.totalDuration)||0}getProgress(){const e=this.getTotalDuration();return e>0?this.currentTime/e:0}animate(){if(this.state!=="playing"||!this.replayData)return;const e=performance.now();this.currentTime=(e-this.startTimestamp)*this.speed;const s=this.options.endTime||this.replayData.totalDuration;if(this.currentTime>=s){this.currentTime=s,this.state="completed",this.renderFrame(this.currentTime),this.emit("replay-complete"),this.options.loop&&setTimeout(()=>{this.currentTime=this.options.startTime||0,this.play()},500);return}this.renderFrame(this.currentTime),this.emit("replay-progress",this.getProgress(),this.currentTime),this.animationId=requestAnimationFrame(()=>this.animate())}renderFrame(e){if(!this.replayData)return;this.clearCanvas();let s=!1;for(let t=0;t<this.replayData.paths.length;t++){const n=this.replayData.paths[t],r=n.startTime||0,h=n.endTime||r+(n.duration||0);if(e<r)break;if(e>=h){this.drawCompletePath(n),!s&&Math.abs(e-h)<32&&this.emit("replay-path-end",t,n);continue}s=!0;const c=Math.max(0,Math.min(1,(e-r)/Math.max(h-r,1)));c>0&&Math.abs(e-r)<32&&this.emit("replay-path-start",t,n),this.drawPartialPath(n,c);break}}drawCompletePath(e){if(!(e.points.length<2)){this.ctx.beginPath(),this.ctx.strokeStyle=e.strokeColor,this.ctx.lineWidth=e.strokeWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.moveTo(e.points[0].x,e.points[0].y);for(let s=1;s<e.points.length;s++)this.ctx.lineTo(e.points[s].x,e.points[s].y);this.ctx.stroke()}}drawPartialPath(e,s){if(e.points.length<2)return;const t=e.startTime||0,n=e.duration||0,r=t+n*s,h=this.getPointsUpToTime(e.points,t,r);h.length<2||(this.ctx.beginPath(),this.ctx.strokeStyle=e.strokeColor,this.ctx.lineWidth=e.strokeWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.drawSmoothCurve(h),this.ctx.stroke())}getPointsUpToTime(e,s,t){const n=[];for(let r=0;r<e.length;r++){const h=e[r],c=s+(h.relativeTime||r*50);if(c<=t)n.push(h);else{if(r>0){const l=e[r-1],p=s+(l.relativeTime||(r-1)*50);if(p<=t){const y=(t-p)/(c-p),d={x:l.x+(h.x-l.x)*y,y:l.y+(h.y-l.y)*y,time:t,pressure:l.pressure?l.pressure+(h.pressure||l.pressure-l.pressure)*y:h.pressure};n.push(d)}}break}}return n}drawSmoothCurve(e){if(e.length<2)return;if(this.ctx.moveTo(e[0].x,e[0].y),e.length===2){this.ctx.lineTo(e[1].x,e[1].y);return}for(let n=1;n<e.length-1;n++){const r=e[n],h=e[n+1],c=(r.x+h.x)/2,l=(r.y+h.y)/2;this.ctx.quadraticCurveTo(r.x,r.y,c,l)}const s=e[e.length-1],t=e[e.length-2];this.ctx.quadraticCurveTo(t.x,t.y,s.x,s.y)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}on(e,s){this.eventCallbacks.has(e)||this.eventCallbacks.set(e,[]),this.eventCallbacks.get(e).push(s)}off(e,s){if(this.eventCallbacks.has(e))if(s){const t=this.eventCallbacks.get(e),n=t.indexOf(s);n>-1&&t.splice(n,1)}else this.eventCallbacks.delete(e)}emit(e,...s){const t=this.eventCallbacks.get(e);t&&t.forEach(n=>n(...s))}destroy(){this.stop(),this.eventCallbacks.clear(),this.replayData=null}}function U(a){const e=a.paths.map((c,l)=>{const p=c.points.map((g,v)=>{var T;let D;if(g.time&&c.points[0].time)D=g.time-c.points[0].time;else if(v===0)D=0;else{const w=c.points[v-1],B=Math.sqrt(Math.pow(g.x-w.x,2)+Math.pow(g.y-w.y,2))/100*1e3;D=(((T=p[v-1])==null?void 0:T.relativeTime)||0)+Math.max(B,16)}return{...g,relativeTime:D}});let y;if(l===0)y=0;else{const g=e[l-1],v=Ce(a.paths[l-1].points,c.points);y=g.endTime+v}const d=p.length>0?p[p.length-1].relativeTime:0,S=y+d;return{...c,points:p,startTime:y,endTime:S,duration:d}}),s=e.length>0?e[e.length-1].endTime:0,t=e.reduce((c,l)=>c+Se(l.points),0),n=s>0?t/(s/1e3):0,r=e.slice(1).map((c,l)=>{const p=e[l];return c.startTime-p.endTime}),h=r.length>0?r.reduce((c,l)=>c+l,0)/r.length:0;return{paths:e,totalDuration:s,speed:1,metadata:{deviceType:be(a),averageSpeed:n,totalDistance:t,averagePauseTime:h}}}function Ce(a,e){if(a.length===0||e.length===0)return 200;const s=a[a.length-1],t=e[0];if(s.time&&t.time)return Math.max(t.time-s.time,50);const n=Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2));return Math.min(Math.max(n*2,100),1e3)}function be(a){const e=a.paths.reduce((r,h)=>r+h.points.length,0),s=a.paths.length;if(e===0)return"touch";const t=e/s;return t>20?"touch":t<10?"mouse":a.paths.some(r=>r.points.some(h=>h.pressure!==void 0))?"pen":"touch"}function Se(a){let e=0;for(let s=1;s<a.length;s++){const t=a[s].x-a[s-1].x,n=a[s].y-a[s-1].y;e+=Math.sqrt(t*t+n*n)}return e}const De=["width","height"],Pe={key:1,class:"signature-toolbar"},Ee=["disabled"],Me=["disabled"],_e=["disabled"],Re={key:2,class:"replay-controls"},We={class:"replay-buttons"},Ie=["disabled"],Ne={key:0},Ve={key:1},Be=["disabled"],$e={class:"replay-progress"},ze=["max","value","disabled"],Xe={class:"time-display"},Ye={class:"replay-speed"},Ae=o.defineComponent({__name:"ElectronicSignature",props:{showToolbar:{type:Boolean,default:!1},width:{default:"100%"},height:{default:300},strokeColor:{default:"#000000"},strokeWidth:{default:2},backgroundColor:{default:"transparent"},disabled:{type:Boolean,default:!1},placeholder:{default:"请在此处签名"},smoothing:{type:Boolean,default:!0},pressureSensitive:{type:Boolean,default:!1},minStrokeWidth:{default:1},maxStrokeWidth:{default:4},borderStyle:{default:"1px solid #ddd"},borderRadius:{default:"4px"},replayMode:{type:Boolean},replayData:{},replayOptions:{}},emits:["signature-start","signature-drawing","signature-end","signature-clear","signature-undo","signature-redo","replay-start","replay-progress","replay-pause","replay-resume","replay-stop","replay-complete","replay-path-start","replay-path-end","replay-speed-change"],setup(a,{expose:e,emit:s}){const t=a,n=s,r=o.ref(),h=o.ref(!1),c=o.ref(null),l=o.ref(_(0,0)),p=o.ref([]),y=o.ref(-1),d=o.ref(null),S=o.ref(!1),g=o.ref("idle"),v=o.ref(0),D=o.ref(0),T=o.computed(()=>typeof t.width=="number"?t.width:800),w=o.computed(()=>typeof t.height=="number"?t.height:300),J=o.computed(()=>({position:"relative",display:"inline-block",width:typeof t.width=="string"?t.width:`${t.width}px`,height:typeof t.height=="string"?t.height:`${t.height}px`})),B=o.computed(()=>({border:t.borderStyle,borderRadius:t.borderRadius,backgroundColor:t.backgroundColor,cursor:t.disabled?"not-allowed":"crosshair",display:"block",width:"100%",height:"100%"})),Je=o.computed(()=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#999",fontSize:"14px",pointerEvents:"none",userSelect:"none"})),Ge=o.computed(()=>t.placeholder&&M(l.value)),G=o.computed(()=>y.value>0),Q=o.computed(()=>y.value<p.value.length-1),K=o.computed(()=>S.value&&d.value),C=o.computed(()=>!K.value&&!t.disabled),Qe=o.computed(()=>{var i;return K.value&&((i=t.replayOptions)==null?void 0:i.showControls)!==!1}),Z=o.computed(()=>({strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,smoothing:t.smoothing,pressure:{enabled:t.pressureSensitive,min:t.minStrokeWidth,max:t.maxStrokeWidth}})),ee=()=>{var i;return((i=r.value)==null?void 0:i.getContext("2d"))||null},R=(i,u)=>{const f=r.value,x=f.getBoundingClientRect(),z=f.width/x.width,I=f.height/x.height;return{x:(i-x.left)*z,y:(u-x.top)*I,time:Date.now()}},te=i=>{if(!C.value)return;h.value=!0;const u=performance.now(),f={...i,time:u};c.value={points:[f],strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,startTime:u,endTime:u,duration:0},n("signature-start")},ae=i=>{if(!h.value||!c.value||!C.value)return;const u=performance.now(),f={...i,time:u};c.value.points.push(f),c.value.startTime&&(c.value.endTime=u,c.value.duration=u-c.value.startTime);const x=ee();x&&N(x,c.value.points,Z.value),oe(),n("signature-drawing",l.value)},ne=()=>{if(!(!h.value||!c.value)){if(h.value=!1,c.value.points.length>0){const i=c.value.points[c.value.points.length-1];i.time&&c.value.startTime&&(c.value.endTime=i.time,c.value.duration=i.time-c.value.startTime)}l.value.paths.push(c.value),l.value.isEmpty=!1,l.value.timestamp=Date.now(),W(),c.value=null,n("signature-end",l.value)}},Ke=i=>{i.preventDefault();const u=R(i.clientX,i.clientY);te(u)},Ze=i=>{if(i.preventDefault(),!h.value)return;const u=R(i.clientX,i.clientY);ae(u)},ie=i=>{i.preventDefault(),ne()},et=i=>{if(i.preventDefault(),i.touches.length!==1)return;const u=i.touches[0],f=R(u.clientX,u.clientY);te(f)},tt=i=>{if(i.preventDefault(),i.touches.length!==1||!h.value)return;const u=i.touches[0],f=R(u.clientX,u.clientY);ae(f)},se=i=>{i.preventDefault(),ne()},oe=()=>{l.value.canvasSize={width:T.value,height:w.value},l.value.isEmpty=M(l.value)},W=()=>{p.value=p.value.slice(0,y.value+1),p.value.push(P(l.value)),y.value=p.value.length-1;const i=50;p.value.length>i&&(p.value=p.value.slice(-i),y.value=p.value.length-1)},E=()=>{const i=ee();i&&(i.clearRect(0,0,T.value,w.value),t.backgroundColor&&t.backgroundColor!=="transparent"&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,T.value,w.value)),l.value.paths.forEach(u=>{if(u.points.length>0){const f={strokeColor:u.strokeColor,strokeWidth:u.strokeWidth,smoothing:t.smoothing,pressure:Z.value.pressure};N(i,u.points,f)}}))},re=()=>{r.value&&(d.value&&d.value.destroy(),d.value=new H(r.value),d.value.on("replay-start",()=>{g.value="playing",n("replay-start")}),d.value.on("replay-progress",(i,u)=>{v.value=i,D.value=u,n("replay-progress",i,u)}),d.value.on("replay-pause",()=>{g.value="paused",n("replay-pause")}),d.value.on("replay-resume",()=>{g.value="playing",n("replay-resume")}),d.value.on("replay-stop",()=>{g.value="stopped",n("replay-stop")}),d.value.on("replay-complete",()=>{g.value="completed",n("replay-complete")}),d.value.on("replay-path-start",(i,u)=>{n("replay-path-start",i,u)}),d.value.on("replay-path-end",(i,u)=>{n("replay-path-end",i,u)}),d.value.on("replay-speed-change",i=>{n("replay-speed-change",i)}))},le=(i,u)=>{d.value||re(),d.value&&(S.value=!0,d.value.setReplayData(i,u||{}),console.log("startReplay调用，自动播放:",u==null?void 0:u.autoPlay),(u==null?void 0:u.autoPlay)===!0&&d.value.play())},ce=i=>{S.value=i,!i&&d.value&&(d.value.stop(),E())},at=()=>M(l.value)?null:U(l.value),ue=()=>{var i;(i=d.value)==null||i.play()},he=()=>{var i;(i=d.value)==null||i.pause()},de=()=>{var i;(i=d.value)==null||i.stop()},pe=i=>{var u;(u=d.value)==null||u.seek(i)},me=i=>{var u;(u=d.value)==null||u.setSpeed(i)},nt=()=>{var i;return((i=d.value)==null?void 0:i.getState())||"idle"},it=()=>{var i;return((i=d.value)==null?void 0:i.getCurrentTime())||0},$=()=>{var i;return((i=d.value)==null?void 0:i.getTotalDuration())||0},st=()=>{var i;return((i=d.value)==null?void 0:i.getProgress())||0},ge=i=>{const u=Math.floor(i/1e3),f=Math.floor(u/60),x=u%60;return`${f}:${x.toString().padStart(2,"0")}`},fe=()=>{C.value&&(l.value=_(T.value,w.value),E(),W(),n("signature-clear"))},ye=()=>{!G.value||!C.value||(y.value--,l.value=P(p.value[y.value]),E(),n("signature-undo",l.value))},ve=()=>{!Q.value||!C.value||(y.value++,l.value=P(p.value[y.value]),E(),n("signature-redo",l.value))},Te=i=>{const u=r.value;return q(u,l.value,i)},we=()=>M(l.value),ke=async i=>{if(!C.value)return;const u=r.value;await F(u,i),l.value=_(T.value,w.value),l.value.isEmpty=!1,W()},ot=()=>P(l.value),rt=i=>{C.value&&(l.value=P(i),E(),W())},xe=(i,u)=>{const f=i||T.value,x=u||w.value,z=Te({format:"png"});o.nextTick(()=>{const I=r.value;I.width=f,I.height=x,we()||ke(z),oe()})},lt=()=>{const i=r.value;i.width=T.value,i.height=w.value,l.value=_(T.value,w.value),p.value=[P(l.value)],y.value=0,E()};return o.watch([()=>t.width,()=>t.height],()=>{o.nextTick(()=>{r.value&&xe()})}),o.watch(()=>t.replayMode,i=>{i!==void 0&&ce(i)}),o.watch(()=>t.replayData,i=>{i&&t.replayMode&&d.value&&(d.value.setReplayData(i,t.replayOptions||{}),console.log("回放数据已更新:",i))}),o.onMounted(()=>{o.nextTick(()=>{lt(),re(),t.replayMode&&t.replayData&&le(t.replayData,t.replayOptions)})}),o.onUnmounted(()=>{d.value&&(d.value.destroy(),d.value=null)}),e({clear:fe,undo:ye,redo:ve,save:Te,isEmpty:we,fromDataURL:ke,getSignatureData:ot,setSignatureData:rt,resize:xe,startReplay:le,getReplayData:at,setReplayMode:ce,play:ue,pause:he,stop:de,seek:pe,setSpeed:me,getState:nt,getCurrentTime:it,getTotalDuration:$,getProgress:st}),(i,u)=>(o.openBlock(),o.createElementBlock("div",{class:"electronic-signature",style:o.normalizeStyle(J.value)},[o.createElementVNode("canvas",{ref_key:"canvasRef",ref:r,width:T.value,height:w.value,style:o.normalizeStyle(B.value),onMousedown:Ke,onMousemove:Ze,onMouseup:ie,onMouseleave:ie,onTouchstart:et,onTouchmove:tt,onTouchend:se,onTouchcancel:se},null,44,De),Ge.value?(o.openBlock(),o.createElementBlock("div",{key:0,class:"signature-placeholder",style:o.normalizeStyle(Je.value)},o.toDisplayString(i.placeholder),5)):o.createCommentVNode("",!0),i.showToolbar?(o.openBlock(),o.createElementBlock("div",Pe,[o.createElementVNode("button",{onClick:fe,disabled:!C.value},"清除",8,Ee),o.createElementVNode("button",{onClick:ye,disabled:!C.value||!G.value},"撤销",8,Me),o.createElementVNode("button",{onClick:ve,disabled:!C.value||!Q.value},"重做",8,_e)])):o.createCommentVNode("",!0),Qe.value?(o.openBlock(),o.createElementBlock("div",Re,[o.createElementVNode("div",We,[o.createElementVNode("button",{onClick:u[0]||(u[0]=f=>g.value==="playing"?he():ue()),disabled:g.value==="idle",class:"replay-btn play-pause-btn"},[g.value==="playing"?(o.openBlock(),o.createElementBlock("span",Ne,"⏸️")):(o.openBlock(),o.createElementBlock("span",Ve,"▶️"))],8,Ie),o.createElementVNode("button",{onClick:u[1]||(u[1]=f=>de()),disabled:g.value==="idle",class:"replay-btn stop-btn"}," ⏹️ ",8,Be)]),o.createElementVNode("div",$e,[o.createElementVNode("input",{type:"range",min:"0",max:$(),value:D.value,onInput:u[2]||(u[2]=f=>pe(Number(f.target.value))),class:"progress-slider",disabled:g.value==="idle"},null,40,ze),o.createElementVNode("div",Xe,[o.createElementVNode("span",null,o.toDisplayString(ge(D.value)),1),u[4]||(u[4]=o.createElementVNode("span",null,"/",-1)),o.createElementVNode("span",null,o.toDisplayString(ge($())),1)])]),o.createElementVNode("div",Ye,[u[6]||(u[6]=o.createElementVNode("label",null,"速度:",-1)),o.createElementVNode("select",{onChange:u[3]||(u[3]=f=>me(Number(f.target.value))),class:"speed-select"},u[5]||(u[5]=[o.createElementVNode("option",{value:"0.5"},"0.5x",-1),o.createElementVNode("option",{value:"1",selected:""},"1x",-1),o.createElementVNode("option",{value:"1.5"},"1.5x",-1),o.createElementVNode("option",{value:"2"},"2x",-1)]),32)])])):o.createCommentVNode("",!0)],4))}}),ht="",V=((a,e)=>{const s=a.__vccOpts||a;for(const[t,n]of e)s[t]=n;return s})(Ae,[["__scopeId","data-v-7184cb09"]]);function L(){return window.devicePixelRatio||1}function Oe(a){const e=a.getContext("2d"),s=L(),t=a.clientWidth,n=a.clientHeight;return a.width=t*s,a.height=n*s,e.scale(s,s),a.style.width=t+"px",a.style.height=n+"px",e}function j(a){if(a.paths.length===0)return{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};let e=1/0,s=1/0,t=-1/0,n=-1/0;return a.paths.forEach(r=>{r.points.forEach(h=>{e=Math.min(e,h.x),s=Math.min(s,h.y),t=Math.max(t,h.x),n=Math.max(n,h.y)})}),{minX:e,minY:s,maxX:t,maxY:n,width:t-e,height:n-s}}function qe(a,e,s=10){const t=j(e);if(t.width===0||t.height===0){const l=document.createElement("canvas");return l.width=1,l.height=1,l}const n=document.createElement("canvas"),r=n.getContext("2d"),h=t.width+s*2,c=t.height+s*2;return n.width=h,n.height=c,r.drawImage(a,t.minX-s,t.minY-s,h,c,0,0,h,c),n}function Fe(a,e,s,t=!0){const n=document.createElement("canvas"),r=n.getContext("2d");let h=e,c=s;if(t){const l=a.width/a.height,p=e/s;l>p?c=e/l:h=s*l}return n.width=h,n.height=c,r.imageSmoothingEnabled=!0,r.imageSmoothingQuality="high",r.drawImage(a,0,0,h,c),n}function He(a,e,s={}){const{fontSize:t=12,fontFamily:n="Arial",color:r="#999",opacity:h=.5,position:c="bottom-right"}=s,l=document.createElement("canvas"),p=l.getContext("2d");l.width=a.width,l.height=a.height,p.drawImage(a,0,0),p.font=`${t}px ${n}`,p.fillStyle=r,p.globalAlpha=h;const d=p.measureText(e).width,S=t;let g,v;switch(c){case"top-left":g=10,v=S+10;break;case"top-right":g=a.width-d-10,v=S+10;break;case"bottom-left":g=10,v=a.height-10;break;case"bottom-right":g=a.width-d-10,v=a.height-10;break;case"center":g=(a.width-d)/2,v=(a.height+S)/2;break;default:g=a.width-d-10,v=a.height-10}return p.fillText(e,g,v),p.globalAlpha=1,l}function Ue(a){const e=document.createElement("canvas"),s=e.getContext("2d");e.width=a.width,e.height=a.height,s.drawImage(a,0,0);const t=s.getImageData(0,0,a.width,a.height),n=t.data;for(let r=0;r<n.length;r+=4){const h=n[r]*.299+n[r+1]*.587+n[r+2]*.114;n[r]=h,n[r+1]=h,n[r+2]=h}return s.putImageData(t,0,0),e}const Le={install:a=>{a.component("ElectronicSignature",V)},ElectronicSignature:V},je="1.0.0";m.ElectronicSignature=V,m.SignatureReplayController=H,m.addWatermark=He,m.calculateStrokeWidth=A,m.cloneSignatureData=P,m.convertToGrayscale=Ue,m.createEmptySignatureData=_,m.createReplayData=U,m.cropSignature=qe,m.default=Le,m.drawSmoothPath=N,m.exportSignature=q,m.getAngle=X,m.getControlPoint=Y,m.getDevicePixelRatio=L,m.getDistance=b,m.getSignatureBounds=j,m.isSignatureEmpty=M,m.loadImageToCanvas=F,m.resizeSignature=Fe,m.setupHighDPICanvas=Oe,m.signatureToSVG=O,m.version=je,Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
