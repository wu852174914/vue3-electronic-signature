(function(p,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],s):(p=typeof globalThis<"u"?globalThis:p||self,s(p.Vue3ElectronicSignature={},p.Vue))})(this,function(p,s){"use strict";var lt=Object.defineProperty;var rt=(p,s,k)=>s in p?lt(p,s,{enumerable:!0,configurable:!0,writable:!0,value:k}):p[s]=k;var v=(p,s,k)=>(rt(p,typeof s!="symbol"?s+"":s,k),k);function k(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function X(n,e){return Math.atan2(e.y-n.y,e.x-n.x)}function Y(n,e,o,t){const a=e||n,l=o||n,u=.2,h=X(a,l)*(t?1:-1),c=k(a,l)*u;return{x:n.x+Math.cos(h)*c,y:n.y+Math.sin(h)*c,time:n.time}}function O(n,e,o){if(!o.pressure.enabled)return o.strokeWidth;const t=k(n,e),a=e.time-n.time,l=a>0?t/a:0,u=Math.max(.1,Math.min(1,1-l*.01)),{min:h,max:c}=o.pressure;return h+(c-h)*u}function W(n,e,o){if(e.length<2)return;if(n.strokeStyle=o.strokeColor,n.lineCap="round",n.lineJoin="round",!o.smoothing||e.length<3){n.beginPath(),n.lineWidth=o.strokeWidth,n.moveTo(e[0].x,e[0].y);for(let a=1;a<e.length;a++)n.lineTo(e[a].x,e[a].y);n.stroke();return}n.beginPath(),n.moveTo(e[0].x,e[0].y);for(let a=1;a<e.length-1;a++){const l=e[a],u=e[a+1];o.pressure.enabled?n.lineWidth=O(e[a-1],l,o):n.lineWidth=o.strokeWidth;const h=Y(l,e[a-1],u);n.quadraticCurveTo(h.x,h.y,l.x,l.y)}const t=e[e.length-1];n.lineTo(t.x,t.y),n.stroke()}function A(n){const{canvasSize:e,paths:o}=n;let t=`<svg width="${e.width}" height="${e.height}" xmlns="http://www.w3.org/2000/svg">`;return o.forEach(a=>{if(a.points.length<2)return;let l=`M ${a.points[0].x} ${a.points[0].y}`;for(let u=1;u<a.points.length;u++)l+=` L ${a.points[u].x} ${a.points[u].y}`;t+=`<path d="${l}" stroke="${a.strokeColor}" stroke-width="${a.strokeWidth}" fill="none" stroke-linecap="round" stroke-linejoin="round"/>`}),t+="</svg>",t}function F(n,e,o={format:"png"}){const{format:t,quality:a=.9,size:l,backgroundColor:u}=o;if(t==="svg")return A(e);const h=document.createElement("canvas"),c=h.getContext("2d");if(l){h.width=l.width,h.height=l.height;const m=l.width/n.width,f=l.height/n.height;c.scale(m,f)}else h.width=n.width,h.height=n.height;switch(u&&u!=="transparent"&&(c.fillStyle=u,c.fillRect(0,0,h.width,h.height)),c.drawImage(n,0,0),t){case"jpeg":return h.toDataURL("image/jpeg",a);case"base64":return h.toDataURL("image/png").split(",")[1];case"png":default:return h.toDataURL("image/png")}}function H(n,e){return new Promise((o,t)=>{const a=new Image;a.onload=()=>{const l=n.getContext("2d");l.clearRect(0,0,n.width,n.height),l.drawImage(a,0,0,n.width,n.height),o()},a.onerror=t,a.src=e})}function P(n){return n.paths.length===0||n.paths.every(e=>e.points.length===0)}function M(n,e){return{paths:[],canvasSize:{width:n,height:e},timestamp:Date.now(),isEmpty:!0}}function D(n){return JSON.parse(JSON.stringify(n))}class U{constructor(e){v(this,"canvas");v(this,"ctx");v(this,"replayData",null);v(this,"state","idle");v(this,"currentTime",0);v(this,"speed",1);v(this,"animationId",null);v(this,"startTimestamp",0);v(this,"pausedTime",0);v(this,"options",{});v(this,"eventCallbacks",new Map);this.canvas=e,this.ctx=e.getContext("2d")}setReplayData(e,o={}){this.replayData=e,this.options={...o},this.speed=o.speed||e.speed||1,this.currentTime=o.startTime||0,this.state="idle"}play(){!this.replayData||this.state==="playing"||(this.state==="paused"?(this.state="playing",this.startTimestamp=performance.now()-this.pausedTime,this.emit("replay-resume")):(this.state="playing",this.startTimestamp=performance.now(),this.pausedTime=0,this.currentTime=this.options.startTime||0,this.clearCanvas(),this.emit("replay-start")),this.animate())}pause(){this.state==="playing"&&(this.state="paused",this.pausedTime=performance.now()-this.startTimestamp,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.emit("replay-pause"))}stop(){this.state="stopped",this.currentTime=0,this.pausedTime=0,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.clearCanvas(),this.emit("replay-stop")}seek(e){if(!this.replayData)return;const o=this.options.endTime||this.replayData.totalDuration;this.currentTime=Math.max(0,Math.min(e,o)),this.state==="playing"?this.startTimestamp=performance.now()-this.currentTime/this.speed:this.pausedTime=this.currentTime/this.speed,this.renderFrame(this.currentTime)}setSpeed(e){const o=this.state==="playing";o&&this.pause(),this.speed=Math.max(.1,Math.min(5,e)),this.emit("replay-speed-change",this.speed),o&&this.play()}getState(){return this.state}getCurrentTime(){return this.currentTime}getTotalDuration(){var e;return((e=this.replayData)==null?void 0:e.totalDuration)||0}getProgress(){const e=this.getTotalDuration();return e>0?this.currentTime/e:0}animate(){if(this.state!=="playing"||!this.replayData)return;const e=performance.now();this.currentTime=(e-this.startTimestamp)*this.speed;const o=this.options.endTime||this.replayData.totalDuration;if(this.currentTime>=o){this.currentTime=o,this.state="completed",this.renderFrame(this.currentTime),this.emit("replay-complete"),this.options.loop&&setTimeout(()=>{this.currentTime=this.options.startTime||0,this.play()},500);return}this.renderFrame(this.currentTime),this.emit("replay-progress",this.getProgress(),this.currentTime),this.animationId=requestAnimationFrame(()=>this.animate())}renderFrame(e){if(!this.replayData)return;this.clearCanvas();let o=-1;for(let t=0;t<this.replayData.paths.length;t++){const a=this.replayData.paths[t],l=a.startTime||0,u=a.endTime||l+(a.duration||0);if(e<l)break;if(e>=u){this.drawCompletePath(a);continue}o=t;const h=(e-l)/(u-l);this.drawPartialPath(a,h),h>0&&h<.1&&this.emit("replay-path-start",t,a);break}if(o>=0){const t=this.replayData.paths[o],a=t.endTime||(t.startTime||0)+(t.duration||0);Math.abs(e-a)<50&&this.emit("replay-path-end",o,t)}}drawCompletePath(e){if(!(e.points.length<2)){this.ctx.beginPath(),this.ctx.strokeStyle=e.strokeColor,this.ctx.lineWidth=e.strokeWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.moveTo(e.points[0].x,e.points[0].y);for(let o=1;o<e.points.length;o++)this.ctx.lineTo(e.points[o].x,e.points[o].y);this.ctx.stroke()}}drawPartialPath(e,o){if(e.points.length<2)return;const t=e.points.length,a=Math.floor(t*o);if(!(a<1)){this.ctx.beginPath(),this.ctx.strokeStyle=e.strokeColor,this.ctx.lineWidth=e.strokeWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.moveTo(e.points[0].x,e.points[0].y);for(let l=1;l<=a;l++)this.ctx.lineTo(e.points[l].x,e.points[l].y);if(o<1&&a<t-1){const l=t*o-a,u=e.points[a],h=e.points[a+1],c=u.x+(h.x-u.x)*l,m=u.y+(h.y-u.y)*l;this.ctx.lineTo(c,m)}this.ctx.stroke()}}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}on(e,o){this.eventCallbacks.has(e)||this.eventCallbacks.set(e,[]),this.eventCallbacks.get(e).push(o)}off(e,o){if(this.eventCallbacks.has(e))if(o){const t=this.eventCallbacks.get(e),a=t.indexOf(o);a>-1&&t.splice(a,1)}else this.eventCallbacks.delete(e)}emit(e,...o){const t=this.eventCallbacks.get(e);t&&t.forEach(a=>a(...o))}destroy(){this.stop(),this.eventCallbacks.clear(),this.replayData=null}}function q(n){const e=n.paths.map((l,u)=>{const h=l.points.map((d,T)=>({...d,relativeTime:T*50})),c=u>0?n.paths[u-1].endTime+200:0,m=h.length*50,f=c+m;return{...l,points:h,startTime:c,endTime:f,duration:m}}),o=e.length>0?e[e.length-1].endTime:0,t=e.reduce((l,u)=>l+Te(u.points),0),a=o>0?t/(o/1e3):0;return{paths:e,totalDuration:o,speed:1,metadata:{deviceType:"touch",averageSpeed:a,totalDistance:t,averagePauseTime:200}}}function Te(n){let e=0;for(let o=1;o<n.length;o++){const t=n[o].x-n[o-1].x,a=n[o].y-n[o-1].y;e+=Math.sqrt(t*t+a*a)}return e}const xe=["width","height"],Ce={key:1,class:"signature-toolbar"},be=["disabled"],Se=["disabled"],De=["disabled"],Ee={key:2,class:"replay-controls"},Pe={class:"replay-buttons"},Me=["disabled"],_e={key:0},Re={key:1},Ie=["disabled"],We={class:"replay-progress"},Ne=["max","value","disabled"],Ve={class:"time-display"},Be={class:"replay-speed"},$e=s.defineComponent({__name:"ElectronicSignature",props:{showToolbar:{type:Boolean,default:!1},width:{default:"100%"},height:{default:300},strokeColor:{default:"#000000"},strokeWidth:{default:2},backgroundColor:{default:"transparent"},disabled:{type:Boolean,default:!1},placeholder:{default:"请在此处签名"},smoothing:{type:Boolean,default:!0},pressureSensitive:{type:Boolean,default:!1},minStrokeWidth:{default:1},maxStrokeWidth:{default:4},borderStyle:{default:"1px solid #ddd"},borderRadius:{default:"4px"},replayMode:{type:Boolean},replayData:{},replayOptions:{}},emits:["signature-start","signature-drawing","signature-end","signature-clear","signature-undo","signature-redo","replay-start","replay-progress","replay-pause","replay-resume","replay-stop","replay-complete","replay-path-start","replay-path-end","replay-speed-change"],setup(n,{expose:e,emit:o}){const t=n,a=o,l=s.ref(),u=s.ref(!1),h=s.ref(null),c=s.ref(M(0,0)),m=s.ref([]),f=s.ref(-1),d=s.ref(null),T=s.ref(!1),y=s.ref("idle"),x=s.ref(0),V=s.ref(0),C=s.computed(()=>typeof t.width=="number"?t.width:800),b=s.computed(()=>typeof t.height=="number"?t.height:300),Ue=s.computed(()=>({position:"relative",display:"inline-block",width:typeof t.width=="string"?t.width:`${t.width}px`,height:typeof t.height=="string"?t.height:`${t.height}px`})),qe=s.computed(()=>({border:t.borderStyle,borderRadius:t.borderRadius,backgroundColor:t.backgroundColor,cursor:t.disabled?"not-allowed":"crosshair",display:"block",width:"100%",height:"100%"})),je=s.computed(()=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#999",fontSize:"14px",pointerEvents:"none",userSelect:"none"})),Je=s.computed(()=>t.placeholder&&P(c.value)),L=s.computed(()=>f.value>0),G=s.computed(()=>f.value<m.value.length-1),Q=s.computed(()=>T.value&&d.value),w=s.computed(()=>!Q.value&&!t.disabled),Le=s.computed(()=>{var i;return Q.value&&((i=t.replayOptions)==null?void 0:i.showControls)!==!1}),K=s.computed(()=>({strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,smoothing:t.smoothing,pressure:{enabled:t.pressureSensitive,min:t.minStrokeWidth,max:t.maxStrokeWidth}})),Z=()=>{var i;return((i=l.value)==null?void 0:i.getContext("2d"))||null},_=(i,r)=>{const g=l.value,S=g.getBoundingClientRect(),z=g.width/S.width,I=g.height/S.height;return{x:(i-S.left)*z,y:(r-S.top)*I,time:Date.now()}},ee=i=>{w.value&&(u.value=!0,h.value={points:[i],strokeColor:t.strokeColor,strokeWidth:t.strokeWidth},a("signature-start"))},te=i=>{if(!u.value||!h.value||!w.value)return;h.value.points.push(i);const r=Z();r&&W(r,h.value.points,K.value),oe(),a("signature-drawing",c.value)},ae=()=>{!u.value||!h.value||(u.value=!1,c.value.paths.push(h.value),c.value.isEmpty=!1,c.value.timestamp=Date.now(),R(),h.value=null,a("signature-end",c.value))},Ge=i=>{i.preventDefault();const r=_(i.clientX,i.clientY);ee(r)},Qe=i=>{if(i.preventDefault(),!u.value)return;const r=_(i.clientX,i.clientY);te(r)},ne=i=>{i.preventDefault(),ae()},Ke=i=>{if(i.preventDefault(),i.touches.length!==1)return;const r=i.touches[0],g=_(r.clientX,r.clientY);ee(g)},Ze=i=>{if(i.preventDefault(),i.touches.length!==1||!u.value)return;const r=i.touches[0],g=_(r.clientX,r.clientY);te(g)},ie=i=>{i.preventDefault(),ae()},oe=()=>{c.value.canvasSize={width:C.value,height:b.value},c.value.isEmpty=P(c.value)},R=()=>{m.value=m.value.slice(0,f.value+1),m.value.push(D(c.value)),f.value=m.value.length-1;const i=50;m.value.length>i&&(m.value=m.value.slice(-i),f.value=m.value.length-1)},E=()=>{const i=Z();i&&(i.clearRect(0,0,C.value,b.value),t.backgroundColor&&t.backgroundColor!=="transparent"&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,C.value,b.value)),c.value.paths.forEach(r=>{if(r.points.length>0){const g={strokeColor:r.strokeColor,strokeWidth:r.strokeWidth,smoothing:t.smoothing,pressure:K.value.pressure};W(i,r.points,g)}}))},se=()=>{l.value&&(d.value&&d.value.destroy(),d.value=new U(l.value),d.value.on("replay-start",()=>{y.value="playing",a("replay-start")}),d.value.on("replay-progress",(i,r)=>{x.value=i,V.value=r,a("replay-progress",i,r)}),d.value.on("replay-pause",()=>{y.value="paused",a("replay-pause")}),d.value.on("replay-resume",()=>{y.value="playing",a("replay-resume")}),d.value.on("replay-stop",()=>{y.value="stopped",a("replay-stop")}),d.value.on("replay-complete",()=>{y.value="completed",a("replay-complete")}),d.value.on("replay-path-start",(i,r)=>{a("replay-path-start",i,r)}),d.value.on("replay-path-end",(i,r)=>{a("replay-path-end",i,r)}),d.value.on("replay-speed-change",i=>{a("replay-speed-change",i)}))},B=(i,r)=>{d.value||se(),d.value&&(T.value=!0,d.value.setReplayData(i,r),(r==null?void 0:r.autoPlay)!==!1&&d.value.play())},le=i=>{T.value=i,!i&&d.value&&(d.value.stop(),E())},et=()=>P(c.value)?null:q(c.value),re=()=>{var i;(i=d.value)==null||i.play()},ce=()=>{var i;(i=d.value)==null||i.pause()},ue=()=>{var i;(i=d.value)==null||i.stop()},he=i=>{var r;(r=d.value)==null||r.seek(i)},de=i=>{var r;(r=d.value)==null||r.setSpeed(i)},tt=()=>{var i;return((i=d.value)==null?void 0:i.getState())||"idle"},at=()=>{var i;return((i=d.value)==null?void 0:i.getCurrentTime())||0},$=()=>{var i;return((i=d.value)==null?void 0:i.getTotalDuration())||0},nt=()=>{var i;return((i=d.value)==null?void 0:i.getProgress())||0},pe=i=>{const r=Math.floor(i/1e3),g=Math.floor(r/60),S=r%60;return`${g}:${S.toString().padStart(2,"0")}`},me=()=>{w.value&&(c.value=M(C.value,b.value),E(),R(),a("signature-clear"))},ge=()=>{!L.value||!w.value||(f.value--,c.value=D(m.value[f.value]),E(),a("signature-undo",c.value))},ye=()=>{!G.value||!w.value||(f.value++,c.value=D(m.value[f.value]),E(),a("signature-redo",c.value))},fe=i=>{const r=l.value;return F(r,c.value,i)},ve=()=>P(c.value),we=async i=>{if(!w.value)return;const r=l.value;await H(r,i),c.value=M(C.value,b.value),c.value.isEmpty=!1,R()},it=()=>D(c.value),ot=i=>{w.value&&(c.value=D(i),E(),R())},ke=(i,r)=>{const g=i||C.value,S=r||b.value,z=fe({format:"png"});s.nextTick(()=>{const I=l.value;I.width=g,I.height=S,ve()||we(z),oe()})},st=()=>{const i=l.value;i.width=C.value,i.height=b.value,c.value=M(C.value,b.value),m.value=[D(c.value)],f.value=0,E()};return s.watch([()=>t.width,()=>t.height],()=>{s.nextTick(()=>{l.value&&ke()})}),s.watch(()=>t.replayMode,i=>{i!==void 0&&le(i)}),s.watch(()=>t.replayData,i=>{i&&t.replayMode&&B(i,t.replayOptions)}),s.onMounted(()=>{s.nextTick(()=>{st(),se(),t.replayMode&&t.replayData&&B(t.replayData,t.replayOptions)})}),s.onUnmounted(()=>{d.value&&(d.value.destroy(),d.value=null)}),e({clear:me,undo:ge,redo:ye,save:fe,isEmpty:ve,fromDataURL:we,getSignatureData:it,setSignatureData:ot,resize:ke,startReplay:B,getReplayData:et,setReplayMode:le,play:re,pause:ce,stop:ue,seek:he,setSpeed:de,getState:tt,getCurrentTime:at,getTotalDuration:$,getProgress:nt}),(i,r)=>(s.openBlock(),s.createElementBlock("div",{class:"electronic-signature",style:s.normalizeStyle(Ue.value)},[s.createElementVNode("canvas",{ref_key:"canvasRef",ref:l,width:C.value,height:b.value,style:s.normalizeStyle(qe.value),onMousedown:Ge,onMousemove:Qe,onMouseup:ne,onMouseleave:ne,onTouchstart:Ke,onTouchmove:Ze,onTouchend:ie,onTouchcancel:ie},null,44,xe),Je.value?(s.openBlock(),s.createElementBlock("div",{key:0,class:"signature-placeholder",style:s.normalizeStyle(je.value)},s.toDisplayString(i.placeholder),5)):s.createCommentVNode("",!0),i.showToolbar?(s.openBlock(),s.createElementBlock("div",Ce,[s.createElementVNode("button",{onClick:me,disabled:!w.value},"清除",8,be),s.createElementVNode("button",{onClick:ge,disabled:!w.value||!L.value},"撤销",8,Se),s.createElementVNode("button",{onClick:ye,disabled:!w.value||!G.value},"重做",8,De)])):s.createCommentVNode("",!0),Le.value?(s.openBlock(),s.createElementBlock("div",Ee,[s.createElementVNode("div",Pe,[s.createElementVNode("button",{onClick:r[0]||(r[0]=g=>y.value==="playing"?ce():re()),disabled:y.value==="idle",class:"replay-btn play-pause-btn"},[y.value==="playing"?(s.openBlock(),s.createElementBlock("span",_e,"⏸️")):(s.openBlock(),s.createElementBlock("span",Re,"▶️"))],8,Me),s.createElementVNode("button",{onClick:r[1]||(r[1]=g=>ue()),disabled:y.value==="idle",class:"replay-btn stop-btn"}," ⏹️ ",8,Ie)]),s.createElementVNode("div",We,[s.createElementVNode("input",{type:"range",min:"0",max:$(),value:V.value,onInput:r[2]||(r[2]=g=>he(Number(g.target.value))),class:"progress-slider",disabled:y.value==="idle"},null,40,Ne),s.createElementVNode("div",Ve,[s.createElementVNode("span",null,s.toDisplayString(pe(V.value)),1),r[4]||(r[4]=s.createElementVNode("span",null,"/",-1)),s.createElementVNode("span",null,s.toDisplayString(pe($())),1)])]),s.createElementVNode("div",Be,[r[6]||(r[6]=s.createElementVNode("label",null,"速度:",-1)),s.createElementVNode("select",{onChange:r[3]||(r[3]=g=>de(Number(g.target.value))),class:"speed-select"},r[5]||(r[5]=[s.createElementVNode("option",{value:"0.5"},"0.5x",-1),s.createElementVNode("option",{value:"1",selected:""},"1x",-1),s.createElementVNode("option",{value:"1.5"},"1.5x",-1),s.createElementVNode("option",{value:"2"},"2x",-1)]),32)])])):s.createCommentVNode("",!0)],4))}}),ct="",N=((n,e)=>{const o=n.__vccOpts||n;for(const[t,a]of e)o[t]=a;return o})($e,[["__scopeId","data-v-7095fbe0"]]);function j(){return window.devicePixelRatio||1}function ze(n){const e=n.getContext("2d"),o=j(),t=n.clientWidth,a=n.clientHeight;return n.width=t*o,n.height=a*o,e.scale(o,o),n.style.width=t+"px",n.style.height=a+"px",e}function J(n){if(n.paths.length===0)return{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0};let e=1/0,o=1/0,t=-1/0,a=-1/0;return n.paths.forEach(l=>{l.points.forEach(u=>{e=Math.min(e,u.x),o=Math.min(o,u.y),t=Math.max(t,u.x),a=Math.max(a,u.y)})}),{minX:e,minY:o,maxX:t,maxY:a,width:t-e,height:a-o}}function Xe(n,e,o=10){const t=J(e);if(t.width===0||t.height===0){const c=document.createElement("canvas");return c.width=1,c.height=1,c}const a=document.createElement("canvas"),l=a.getContext("2d"),u=t.width+o*2,h=t.height+o*2;return a.width=u,a.height=h,l.drawImage(n,t.minX-o,t.minY-o,u,h,0,0,u,h),a}function Ye(n,e,o,t=!0){const a=document.createElement("canvas"),l=a.getContext("2d");let u=e,h=o;if(t){const c=n.width/n.height,m=e/o;c>m?h=e/c:u=o*c}return a.width=u,a.height=h,l.imageSmoothingEnabled=!0,l.imageSmoothingQuality="high",l.drawImage(n,0,0,u,h),a}function Oe(n,e,o={}){const{fontSize:t=12,fontFamily:a="Arial",color:l="#999",opacity:u=.5,position:h="bottom-right"}=o,c=document.createElement("canvas"),m=c.getContext("2d");c.width=n.width,c.height=n.height,m.drawImage(n,0,0),m.font=`${t}px ${a}`,m.fillStyle=l,m.globalAlpha=u;const d=m.measureText(e).width,T=t;let y,x;switch(h){case"top-left":y=10,x=T+10;break;case"top-right":y=n.width-d-10,x=T+10;break;case"bottom-left":y=10,x=n.height-10;break;case"bottom-right":y=n.width-d-10,x=n.height-10;break;case"center":y=(n.width-d)/2,x=(n.height+T)/2;break;default:y=n.width-d-10,x=n.height-10}return m.fillText(e,y,x),m.globalAlpha=1,c}function Ae(n){const e=document.createElement("canvas"),o=e.getContext("2d");e.width=n.width,e.height=n.height,o.drawImage(n,0,0);const t=o.getImageData(0,0,n.width,n.height),a=t.data;for(let l=0;l<a.length;l+=4){const u=a[l]*.299+a[l+1]*.587+a[l+2]*.114;a[l]=u,a[l+1]=u,a[l+2]=u}return o.putImageData(t,0,0),e}const Fe={install:n=>{n.component("ElectronicSignature",N)},ElectronicSignature:N},He="1.0.0";p.ElectronicSignature=N,p.SignatureReplayController=U,p.addWatermark=Oe,p.calculateStrokeWidth=O,p.cloneSignatureData=D,p.convertToGrayscale=Ae,p.createEmptySignatureData=M,p.createReplayData=q,p.cropSignature=Xe,p.default=Fe,p.drawSmoothPath=W,p.exportSignature=F,p.getAngle=X,p.getControlPoint=Y,p.getDevicePixelRatio=j,p.getDistance=k,p.getSignatureBounds=J,p.isSignatureEmpty=P,p.loadImageToCanvas=H,p.resizeSignature=Ye,p.setupHighDPICanvas=ze,p.signatureToSVG=A,p.version=He,Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
