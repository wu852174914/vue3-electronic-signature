# 更新日志

所有重要的项目变更都会记录在这个文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.0.0] - 2024-12-XX

### 🎨 新增功能

#### 多种笔迹样式支持
- **钢笔样式** - 极细锐利线条(1px)，商务精准，适合正式签名
- **毛笔样式** - 粗细变化极大(1-20px)，传统书法效果，墨迹扩散
- **马克笔样式** - 超粗荧光效果(12px)，荧光光晕，醒目标记
- **铅笔样式** - 粗糙纹理(2-5px)，素描质感，石墨颗粒效果
- **圆珠笔样式** - 细线断续(0.8-1.8px)，断续效果，墨水聚集

#### 笔迹样式技术特性
- 每种样式都有独特的绘制算法和视觉效果
- 支持动态线宽计算和压感模拟
- 不同的线条端点和连接样式
- 特殊效果：透明度、纹理、扩散、断续等
- 录制和回放保持完全一致的笔迹效果

#### API 增强
- 新增 `penStyle` 属性支持样式选择
- 新增 `PenStyle` 和 `PenStyleConfig` 类型定义
- 新增 `getAllPenStyles()` 工具函数
- 新增 `getPenStyleConfig()` 工具函数
- 新增 `createDrawOptionsFromPenStyle()` 工具函数

### 🔧 性能优化

#### 绘制性能大幅提升
- 实现高效增量绘制算法，避免全画布重绘
- 绘制复杂度从 O(n) 优化到 O(1)
- 消除录制过程中的卡顿问题
- 保持流畅的用户体验

#### 视觉质量改进
- 统一录制和回放的绘制算法
- 消除实时绘制的叠加问题
- 修复结束绘制时的视觉质量下降
- 确保整个绘制过程的视觉一致性

### 🎬 回放功能增强

#### 回放数据自动设置
- 生成回放数据后自动启用回放模式
- 修复第一次回放失败的问题
- 简化用户操作流程

#### 回放笔迹样式支持
- 回放控制器完全支持所有笔迹样式
- 与录制时保持完全一致的视觉效果
- 支持样式参数的正确传递

### 📚 文档完善
- 更新README.md，添加笔迹样式功能介绍
- 新增笔迹样式详解表格和使用示例
- 完善API文档，添加新属性说明
- 添加完整的类型定义文档

### 🐛 问题修复
- 修复录制与回放视觉差异问题
- 修复实时绘制的性能问题
- 修复第一次回放数据为null的问题
- 修复占位符在回放模式下的显示问题

## [1.2.0] - 2024-12-XX

### 新增
- 🎬 **签名回放功能** - 完整的签名路径录制和回放系统
  - 支持签名路径的时间轴回放
  - 提供播放、暂停、停止、跳转等控制功能
  - 支持回放速度调节（0.5x - 2x）
  - 内置回放控制UI组件
  - 丰富的回放事件监听
  - 自动生成回放数据和元数据
- 📊 **签名分析** - 新增签名元数据分析
  - 计算平均书写速度
  - 统计总绘制距离
  - 分析笔画间停顿时间
  - 设备类型检测

### 改进
- 🔧 **类型系统增强** - 扩展了类型定义以支持回放功能
  - 新增 `SignatureReplay` 接口
  - 新增 `ReplayOptions` 配置接口
  - 新增 `ReplayState` 状态类型
  - 新增 `ReplayEvents` 事件接口
  - 扩展 `SignaturePoint` 支持相对时间
  - 扩展 `SignaturePath` 支持时间信息
- 🎨 **UI组件优化** - 改进了用户界面
  - 新增回放控制条组件
  - 优化了按钮和进度条样式
  - 改进了时间显示格式
  - 增强了交互反馈
- 📝 **文档完善** - 大幅更新了文档
  - 新增回放功能完整使用指南
  - 添加了多个实用示例
  - 更新了API文档
  - 完善了类型定义说明

### 技术改进
- 🏗️ **架构优化** - 重构了组件架构
  - 新增 `SignatureReplayController` 回放控制器
  - 实现了事件驱动的回放系统
  - 优化了画布渲染性能
  - 改进了内存管理
- 🧪 **测试覆盖** - 大幅提升了测试覆盖率
  - 新增回放功能单元测试
  - 添加了集成测试用例
  - 完善了工具函数测试
  - 增加了性能测试

### 修复
- 🐛 **兼容性修复** - 修复了一些兼容性问题
  - 修复了TypeScript类型检查错误
  - 优化了事件发射器类型定义
  - 改进了组件属性验证

## [1.0.1] - 2024-12-XX

### 修复
- 修复package.json中的仓库URL和作者信息
- 删除错误的PDFViewer组件文件
- 修复TypeScript编译错误

## [1.0.0] - 2024-01-XX

### 新增
- 🎉 首次发布 Vue3 电子签名组件库
- ✨ 基于 Canvas 的流畅绘图引擎
- 📱 完整的移动端触摸支持
- 🎨 丰富的样式定制选项
- 📤 多格式导出功能（PNG、JPEG、SVG、Base64）
- 🔄 撤销/重做功能
- 📏 响应式设计支持
- 💪 完整的 TypeScript 类型定义
- 🎯 压感模拟效果
- 🖼️ 内置图像处理工具

### 核心功能
- **ElectronicSignature 组件**: 主要的电子签名组件
- **签名绘制**: 支持鼠标和触摸绘制
- **平滑曲线**: 基于贝塞尔曲线的平滑绘制算法
- **压感效果**: 根据绘制速度模拟压感
- **历史管理**: 完整的撤销/重做功能
- **数据导出**: 支持多种格式导出
- **数据管理**: 签名数据的获取和设置

### 工具函数
- **签名处理**: 距离计算、角度计算、控制点生成
- **画布工具**: 高DPI支持、边界计算、裁剪、缩放
- **图像处理**: 水印添加、灰度转换
- **数据操作**: 数据克隆、空值判断

### 文档和示例
- 📖 完整的 API 文档
- 📚 详细的使用指南
- 🎯 丰富的使用示例
- 📱 移动端优化示例
- 📝 表单集成示例
- 📄 合同签署示例

### 开发工具
- ⚡ Vite 构建工具
- 🔧 TypeScript 支持
- 🧪 测试框架集成
- 📦 组件库打包配置
- 🎨 代码格式化配置

### 兼容性
- Vue 3.0+
- 现代浏览器（Chrome 60+, Firefox 55+, Safari 12+, Edge 79+）
- 移动端浏览器支持
- TypeScript 5.0+

### 性能优化
- 高效的绘图算法
- 内存使用优化
- 大量签名点的处理优化
- 响应式更新优化

## [未来计划]

### [1.1.0] - 计划中
- 🎨 更多绘图工具（橡皮擦、荧光笔）
- 🖼️ 背景图片支持
- 📐 网格和辅助线
- 🎯 更精确的压感支持
- 🌐 国际化支持

### [1.2.0] - 计划中
- 🤖 AI 签名识别
- 📊 签名分析工具
- 🔐 数字签名集成
- 📱 原生移动端支持

### [2.0.0] - 长期计划
- 🎮 3D 签名支持
- 🎨 矢量绘图引擎
- 🌊 实时协作功能
- 🔗 区块链集成
